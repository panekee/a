<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proyecto 1 - Descarga</title>
  <link rel="stylesheet" href="../../style.css">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #000 70%, #333);
      color: #eee;
      text-align: center;
      min-height: 100vh;
    }

    .container {
      padding: 3rem 1rem;
      max-width: 900px;
      margin: auto;
    }

    .download-btn {
      display: inline-block;
      padding: 1rem 2rem;
      background: #28a745;
      color: white;
      font-size: 1.3rem;
      font-weight: bold;
      border-radius: 12px;
      text-decoration: none;
      transition: transform 0.2s ease, background 0.2s ease;
    }

    .download-btn:hover {
      background: #218838;
      transform: scale(1.05);
    }

    .code-box {
      background: #1e1e1e;
      border-radius: 15px;
      padding: 1.5rem;
      text-align: left;
      margin: 2rem 0;
      box-shadow: 0 4px 15px rgba(0,0,0,0.6);
      overflow-x: auto;
    }

    pre {
      margin: 0;
      color: #0f0;
      font-size: 0.95rem;
      line-height: 1.4;
    }

    a.github-link {
      display: inline-block;
      margin-top: 1rem;
      color: #00aaff;
      text-decoration: none;
      font-weight: bold;
    }

    a.github-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Proyecto 1</h1>

    <!-- BotÃ³n de descarga -->
    <a href="../../descargas/proyecto1.zip" class="download-btn">â¬‡ Descargar</a>

    <!-- CÃ³digo base -->
    <div class="code-box">
      <h2>CÃ³digo base</h2>
      <pre>
import tkinter as tk
from tkinter import simpledialog, scrolledtext

# Mapa Morse
MORSE_CODE = {
    'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.',
    'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---',
    'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---',
    'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-',
    'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--',
    'Z': '--..',
    '0': '-----', '1': '.----','2': '..---','3': '...--',
    '4': '....-','5': '.....','6': '-....','7': '--...',
    '8': '---..','9': '----.'
}

def generar_codigo(palabra):
    palabra = palabra.upper()
    codigo = """const int led = 13; // LED
const int dot = 250; // duraciÃ³n de un punto en ms

void setup() { pinMode(led, OUTPUT); }
void blinkDot() { digitalWrite(led, HIGH); delay(dot); digitalWrite(led, LOW); delay(dot); }
void blinkDash() { digitalWrite(led, HIGH); delay(dot*3); digitalWrite(led, LOW); delay(dot); }

void loop() {
"""
    for i, letra in enumerate(palabra):
        if letra == ' ':
            codigo += "  delay(dot*7); // espacio entre palabras\n"
            continue
        if letra not in MORSE_CODE:
            continue
        for simbolo in MORSE_CODE[letra]:
            codigo += "  blinkDot();\n" if simbolo == '.' else "  blinkDash();\n"
        if i < len(palabra)-1:
            codigo += "  delay(dot*3); // espacio entre letras\n"
    codigo += "  while(1); // detener loop\n}"
    return codigo

# FunciÃ³n para copiar al portapapeles
def copiar_al_portapapeles(texto, root):
    root.clipboard_clear()
    root.clipboard_append(texto)
    root.update()  # actualizar portapapeles

# Interfaz Tkinter
root = tk.Tk()
root.withdraw()  # ocultar ventana principal

# Popup para ingresar palabra
palabra = simpledialog.askstring("Entrada", "Escribe la palabra para convertir a Morse:")

if palabra:
    codigo_final = generar_codigo(palabra)

    # Crear ventana para mostrar cÃ³digo y botÃ³n copiar
    ventana = tk.Toplevel()
    ventana.title("CÃ³digo Arduino")

    st = scrolledtext.ScrolledText(ventana, width=80, height=25)
    st.pack(padx=10, pady=10)
    st.insert(tk.END, codigo_final)
    st.config(state=tk.DISABLED)  # evitar ediciÃ³n

    boton_copiar = tk.Button(ventana, text="Copiar al portapapeles",
                             command=lambda: copiar_al_portapapeles(codigo_final, ventana))
    boton_copiar.pack(pady=5)

    ventana.mainloop()
      </pre>
    </div>

    <!-- Link a GitHub -->
    <a href="https://github.com/TU-USUARIO/TU-REPO" target="_blank" class="github-link">
      ðŸ”— Ver en GitHub
    </a>
  </div>
</body>
</html>
